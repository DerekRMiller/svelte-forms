var K=Object.defineProperty,L=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var B=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))Q.call(t,r)&&B(e,r,t[r]);if(U)for(var r of U(t))W.call(t,r)&&B(e,r,t[r]);return e},V=(e,t)=>L(e,M(t));import{a1 as j,a2 as Y,a3 as Z,C as x,S as ee,i as te,s as re,e as F,j as k,t as C,c as S,a as I,l as J,g as T,d as h,b as ne,f as g,E as y,a4 as X,F as ae,h as z,X as D,a5 as G}from"../../chunks/vendor-79d26fd6.js";function ie(...e){let t=[],r=[];if(e.forEach(a=>{const i=j(a);t.includes(i.name)?r=r.includes(i.name)?r:[...r,i.name]:t=[...t,i.name]}),r.length)throw new Error(`Cannot have the fields with the same name: ${r.join(", ")}`);const n=Y(e,a=>({valid:a.every(i=>i.valid),dirty:a.some(i=>i.dirty),errors:a.map(i=>i.errors.map(c=>c.includes(".")?c:`${i.name}.${c}`)).flat().filter((i,c,m)=>m.indexOf(i)===c),hasError(i){return this.errors.findIndex(c=>c===i)!==-1}})),{subscribe:u}=n;function l(){e.forEach(a=>a.reset&&a.reset())}async function o(){for(const a of e)a.validate&&await a.validate()}function d(a){return e.find(i=>j(i).name===a)}return{subscribe:u,reset:l,validate:o,getField:d}}const se={valid:!0,checkOnInit:!1,validateOnChange:!0,stopAtFirstError:!1};function le(e){const t=Object.keys(e);return["name","value","valid","invalid","errors"].every(r=>t.includes(r))}function ue(e){const t=function(n){return e.subscribe!==void 0},r=function(n){return!!e.name&&e.valid!==void 0};return t()?j(e).value:r()?e.value:e}async function H(e,t,r=!1){const n=ue(e);let u=[];for(const l of t){let o=l(n);if(Z(o)&&(o=await o),r&&!o.valid){u=[o];break}u=[...u,o]}return u}function w(e,t,r={}){if(t){const n=t.filter(l=>!l.valid).map(l=>l.name),u=!n.length;return O(V(O({},e),{valid:u,invalid:!u,errors:n}),r)}return e}function oe(e,t,r=[],n){const u={name:e,value:t,valid:n.valid,invalid:!n.valid,dirty:!1,errors:[]},l=x(u),{subscribe:o,update:d,set:a}=l;async function i(v,p=!1){if(le(v)||(v=w(j(l),[],{value:v})),p||n.validateOnChange){let _=await H(v,r,n.stopAtFirstError);a(w(v,_,{dirty:!0}))}else a(w(v,[],{dirty:!0}))}async function c(){const v=await H(l,r,n.stopAtFirstError);let p;return d(_=>(p=w(_,v,{dirty:!1}),p)),p}function m(){a(w({dirty:!1,errors:[],name:e,valid:n.valid,invalid:!n.valid,value:t}))}return n.checkOnInit&&i(u),{subscribe:o,update:d,set:i,validate:c,reset:m}}function fe(e,t,r=[],n={}){return oe(e,t,r,O(O({},se),n))}function de(){return e=>{let t=!0;return e==null&&(t=!1),typeof e=="string"&&(t=e.replace(/\s/g,"").length>0),{valid:t,name:"required"}}}function ce(e){return t=>t==null?{valid:!1,name:"pattern"}:{valid:e.test(t),name:"pattern"}}function ve(e){let t,r,n,u=JSON.stringify(e[2],null,2)+"",l,o,d,a,i,c,m,v=JSON.stringify(e[0],null,2)+"",p,_,b,E=JSON.stringify(e[1],null,2)+"",N,P,q;return{c(){t=F("section"),r=F("input"),n=k(),l=C(u),o=k(),d=F("button"),a=C("Send form"),c=k(),m=F("pre"),p=C(v),_=k(),b=F("pre"),N=C(E),this.h()},l(s){t=S(s,"SECTION",{});var f=I(t);r=S(f,"INPUT",{type:!0}),n=J(f),l=T(f,u),o=J(f),d=S(f,"BUTTON",{});var A=I(d);a=T(A,"Send form"),A.forEach(h),f.forEach(h),c=J(s),m=S(s,"PRE",{});var $=I(m);p=T($,v),$.forEach(h),_=J(s),b=S(s,"PRE",{});var R=I(b);N=T(R,E),R.forEach(h),this.h()},h(){ne(r,"type","text"),d.disabled=i=!e[1].valid},m(s,f){g(s,t,f),y(t,r),X(r,e[0].value),y(t,n),y(t,l),y(t,o),y(t,d),y(d,a),g(s,c,f),g(s,m,f),y(m,p),g(s,_,f),g(s,b,f),y(b,N),P||(q=ae(r,"input",e[4]),P=!0)},p(s,[f]){f&1&&r.value!==s[0].value&&X(r,s[0].value),f&2&&i!==(i=!s[1].valid)&&(d.disabled=i),f&1&&v!==(v=JSON.stringify(s[0],null,2)+"")&&z(p,v),f&2&&E!==(E=JSON.stringify(s[1],null,2)+"")&&z(N,E)},i:D,o:D,d(s){s&&h(t),s&&h(c),s&&h(m),s&&h(_),s&&h(b),P=!1,q()}}}function me(e,t,r){let n,u;const l=fe("name","",[de(),ce(/\d+/)]);G(e,l,a=>r(0,n=a));const o=ie(l);G(e,o,a=>r(1,u=a));function d(){n.value=this.value,l.set(n)}return[n,u,l,o,d]}class _e extends ee{constructor(t){super();te(this,t,me,ve,re,{})}}export{_e as default};
