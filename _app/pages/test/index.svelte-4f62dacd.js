var qe=Object.defineProperty,Se=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var _e=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var pe=(e,t,r)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ie=(e,t)=>{for(var r in t||(t={}))Ae.call(t,r)&&pe(e,r,t[r]);if(_e)for(var r of _e(t))Fe.call(t,r)&&pe(e,r,t[r]);return e},ae=(e,t)=>Se(e,Te(t));import{R as Ie,T as be,C as Be,U as Je,S as Re,i as Ue,s as Ve,e as y,t as T,k as A,c as N,a as F,g as I,d as n,n as B,b as V,f as E,F as c,V as M,W,X as Ee,h as se,L as he,Y as Pe,Z as ne}from"../../chunks/vendor-b1bbe6fe.js";function Ze(e,t,r=[],i){const a={name:e,value:t,valid:!0,dirty:!1,errors:[]},u=Be(a),{subscribe:o,update:v,set:d}=u;function P(m){v(m),v(s=>(s.dirty=!0,s))}function J(m,s){if(s){const h=s.filter(k=>!k.valid).map(k=>k.name),_=!h.length;return ae(ie({},m),{dirty:!0,valid:_,errors:h})}return m}async function q(m){const s=await m;let h=be(u);s.valid||d(ae(ie({},h),{valid:!1,errors:[...h.errors,s.name]}))}function R(m,s=!1){if(s||i.validateOnChange){let h=[];for(const _ of r){const k=_(m.value);if(Ie(k)){q(k);continue}else{if(i.stopAtFirstError&&!k.valid){h=[k];break}h=[...h,k]}}d(J(m,h))}else d(J(m))}function L(){R(be(u),!0)}function w(){d(J({dirty:!1,errors:[],name:e,valid:i.valid,value:t}))}return i.checkOnInit&&R(a),{subscribe:o,update:P,set:R,validate:L,reset:w}}const we={valid:!0,checkOnInit:!1,validateOnChange:!0,stopAtFirstError:!1};function ye(e,t,r=[],i=we){return Ze(e,t,r,i)}function ze(...e){const t=Je(e,u=>({valid:u.every(o=>o.valid),dirty:u.some(o=>o.dirty),errors:u.map(o=>o.errors.map(v=>`${o.name}.${v}`)).flat(),hasError(o){return this.errors.findIndex(v=>v===o)!==-1}})),{subscribe:r}=t;function i(){e.forEach(u=>u.reset())}function a(){e.forEach(u=>u.validate())}return{subscribe:r,reset:i,validate:a}}function Ne(e,{field:t=null,valid:r="valid",invalid:i="invalid",dirty:a="dirty"}={}){const u=t.subscribe(o=>{o.dirty?(e.classList.add(a),o.valid?(e.classList.add(r),e.classList.remove(i)):(e.classList.add(i),e.classList.remove(r))):e.classList.remove(a)});return{destroy:()=>u()}}function Ce(){return e=>{const t=/^[a-zA-Z0-9_+&*-]+(?:\.[a-zA-Z0-9_+&*-]+)*@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,7}$/;return{valid:Boolean(e)&&t.test(e),name:"not_an_email"}}}function je(e){return t=>({valid:(isNaN(t)?t.length:parseFloat(t))>=e,name:"min"})}function ke(){return e=>{let t=!0;return e==null&&(t=!1),typeof e=="string"&&(t=e.replace(/\s/g,"").length>0),{valid:t,name:"required"}}}function Oe(e){let t,r;return{c(){t=y("div"),r=T("Name is required")},l(i){t=N(i,"DIV",{});var a=F(t);r=I(a,"Name is required"),a.forEach(n)},m(i,a){E(i,t,a),c(t,r)},d(i){i&&n(t)}}}function Le(e){let t,r;return{c(){t=y("div"),r=T("Email is required")},l(i){t=N(i,"DIV",{});var a=F(t);r=I(a,"Email is required"),a.forEach(n)},m(i,a){E(i,t,a),c(t,r)},d(i){i&&n(t)}}}function De(e){let t,r,i,a,u=JSON.stringify(e[0])+"",o,v,d,P,J,q,R,L,w,m,s,h,_,k,z,Q,g,x=e[0].hasError("name.required"),X,C,j=JSON.stringify(e[1],null,2)+"",Y,$,O,ee,S,te,le=e[0].hasError("email.required"),G,D,H=JSON.stringify(e[2],null,2)+"",K,re,ue,p=x&&Oe(),b=le&&Le();return{c(){t=y("h1"),r=T("Svelte store test"),i=A(),a=y("div"),o=T(u),v=A(),d=y("button"),P=T("Reset form"),J=A(),q=y("button"),R=T("Validate form"),L=A(),w=y("br"),m=A(),s=y("label"),h=T(`Name:\r
	`),_=y("input"),k=A(),z=y("button"),Q=T("validate"),g=A(),p&&p.c(),X=A(),C=y("pre"),Y=T(j),$=A(),O=y("label"),ee=T(`Email:\r
	`),S=y("input"),te=A(),b&&b.c(),G=A(),D=y("pre"),K=T(H),this.h()},l(l){t=N(l,"H1",{});var f=F(t);r=I(f,"Svelte store test"),f.forEach(n),i=B(l),a=N(l,"DIV",{});var fe=F(a);o=I(fe,u),fe.forEach(n),v=B(l),d=N(l,"BUTTON",{});var oe=F(d);P=I(oe,"Reset form"),oe.forEach(n),J=B(l),q=N(l,"BUTTON",{});var ce=F(q);R=I(ce,"Validate form"),ce.forEach(n),L=B(l),w=N(l,"BR",{}),m=B(l),s=N(l,"LABEL",{for:!0});var U=F(s);h=I(U,`Name:\r
	`),_=N(U,"INPUT",{type:!0,id:!0,class:!0}),k=B(U),z=N(U,"BUTTON",{});var de=F(z);Q=I(de,"validate"),de.forEach(n),g=B(U),p&&p.l(U),X=B(U),C=N(U,"PRE",{});var ve=F(C);Y=I(ve,j),ve.forEach(n),U.forEach(n),$=B(l),O=N(l,"LABEL",{for:!0});var Z=F(O);ee=I(Z,`Email:\r
	`),S=N(Z,"INPUT",{type:!0,id:!0,class:!0}),te=B(Z),b&&b.l(Z),G=B(Z),D=N(Z,"PRE",{});var me=F(D);K=I(me,H),me.forEach(n),Z.forEach(n),this.h()},h(){V(_,"type","text"),V(_,"id","name"),V(_,"class","svelte-pyfgoj"),V(s,"for","name"),V(S,"type","email"),V(S,"id","email"),V(S,"class","svelte-pyfgoj"),V(O,"for","email")},m(l,f){E(l,t,f),c(t,r),E(l,i,f),E(l,a,f),c(a,o),E(l,v,f),E(l,d,f),c(d,P),E(l,J,f),E(l,q,f),c(q,R),E(l,L,f),E(l,w,f),E(l,m,f),E(l,s,f),c(s,h),c(s,_),M(_,e[1].value),c(s,k),c(s,z),c(z,Q),c(s,g),p&&p.m(s,null),c(s,X),c(s,C),c(C,Y),E(l,$,f),E(l,O,f),c(O,ee),c(O,S),M(S,e[2].value),c(O,te),b&&b.m(O,null),c(O,G),c(O,D),c(D,K),re||(ue=[W(d,"click",e[6]),W(q,"click",e[7]),W(_,"input",e[8]),Ee(Ne.call(null,_,{field:e[3]})),W(z,"click",e[3].validate),W(S,"input",e[9]),Ee(Ne.call(null,S,{field:e[4],valid:"foo",invalid:"bar"}))],re=!0)},p(l,[f]){f&1&&u!==(u=JSON.stringify(l[0])+"")&&se(o,u),f&2&&_.value!==l[1].value&&M(_,l[1].value),f&1&&(x=l[0].hasError("name.required")),x?p||(p=Oe(),p.c(),p.m(s,X)):p&&(p.d(1),p=null),f&2&&j!==(j=JSON.stringify(l[1],null,2)+"")&&se(Y,j),f&4&&S.value!==l[2].value&&M(S,l[2].value),f&1&&(le=l[0].hasError("email.required")),le?b||(b=Le(),b.c(),b.m(O,G)):b&&(b.d(1),b=null),f&4&&H!==(H=JSON.stringify(l[2],null,2)+"")&&se(K,H)},i:he,o:he,d(l){l&&n(t),l&&n(i),l&&n(a),l&&n(v),l&&n(d),l&&n(J),l&&n(q),l&&n(L),l&&n(w),l&&n(m),l&&n(s),p&&p.d(),l&&n($),l&&n(O),b&&b.d(),re=!1,Pe(ue)}}}function He(e,t,r){let i,a,u;const o=ye("name","",[ke(),je(3)]);ne(e,o,L=>r(1,a=L));const v=ye("email","",[ke(),Ce()]);ne(e,v,L=>r(2,u=L));const d=ze(o,v);ne(e,d,L=>r(0,i=L));const P=()=>d.reset(),J=()=>d.validate();function q(){a.value=this.value,o.set(a)}function R(){u.value=this.value,v.set(u)}return[i,a,u,o,v,d,P,J,q,R]}class Ye extends Re{constructor(t){super();Ue(this,t,He,De,Ve,{})}}export{Ye as default};
