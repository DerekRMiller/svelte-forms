var Ve=Object.defineProperty,De=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var ge=(t,e,r)=>e in t?Ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ne=(t,e)=>{for(var r in e||(e={}))Se.call(e,r)&&ge(t,r,e[r]);if(be)for(var r of be(e))Ae.call(e,r)&&ge(t,r,e[r]);return t},ye=(t,e)=>De(t,Re(e));import{S as $e,i as Ee,s as ke,e as E,t as I,c as k,a as O,g as N,d as w,f as ae,D as u,h as M,G as Ce,a0 as we,k as T,n as F,b as V,L,E as S,x as P,r as Ue,u as G,w as qe,a1 as Be,a2 as je,W as Pe,a3 as z,a4 as Oe,a5 as We,C as Me,j as se,m as le,a6 as J,o as ie,v as oe,a7 as Ge,a8 as ue}from"../../chunks/vendor-6f23b643.js";function Te(t){var o;let e,r=((o=t[1].errors)==null?void 0:o.join(", "))+"",a,s,f;return{c(){e=E("div"),a=I(r)},l(l){e=k(l,"DIV",{});var i=O(e);a=N(i,r),i.forEach(w)},m(l,i){ae(l,e,i),u(e,a),f=!0},p(l,i){var n;(!f||i&2)&&r!==(r=((n=l[1].errors)==null?void 0:n.join(", "))+"")&&M(a,r)},i(l){f||(Ce(()=>{s||(s=we(e,je,{duration:200},!0)),s.run(1)}),f=!0)},o(l){s||(s=we(e,je,{duration:200},!1)),s.run(0),f=!1},d(l){l&&w(e),l&&s&&s.end()}}}function He(t){var R;let e,r,a=(t[1].dirty?"[Dirty]":"")+"",s,f,o=((R=t[1].name)!=null?R:"form")+"",l,i,n=(t[1].errors.length?`(${t[1].errors.length})`:"")+"",v,h,d,c,b,m=t[2]&&Te(t);return{c(){e=E("div"),r=E("span"),s=I(a),f=T(),l=I(o),i=E("span"),v=I(n),h=T(),m&&m.c(),this.h()},l(p){e=k(p,"DIV",{class:!0});var g=O(e);r=k(g,"SPAN",{class:!0});var j=O(r);s=N(j,a),f=F(j),l=N(j,o),i=k(j,"SPAN",{});var $=O(i);v=N($,n),$.forEach(w),j.forEach(w),h=F(g),m&&m.l(g),g.forEach(w),this.h()},h(){V(r,"class","p-2 inline-block rounded-lg transition-colors duration-200 border-2 border-dashed border-transparent"),L(r,"bg-green-200",t[1].valid),L(r,"bg-red-200",t[1].invalid),V(e,"class","font-mono")},m(p,g){ae(p,e,g),u(e,r),u(r,s),u(r,f),u(r,l),u(r,i),u(i,v),u(e,h),m&&m.m(e,null),d=!0,c||(b=S(e,"click",t[3]),c=!0)},p(p,[g]){var j;(!d||g&2)&&a!==(a=(p[1].dirty?"[Dirty]":"")+"")&&M(s,a),(!d||g&2)&&o!==(o=((j=p[1].name)!=null?j:"form")+"")&&M(l,o),(!d||g&2)&&n!==(n=(p[1].errors.length?`(${p[1].errors.length})`:"")+"")&&M(v,n),g&2&&L(r,"bg-green-200",p[1].valid),g&2&&L(r,"bg-red-200",p[1].invalid),p[2]?m?(m.p(p,g),g&4&&P(m,1)):(m=Te(p),m.c(),P(m,1),m.m(e,null)):m&&(Ue(),G(m,1,1,()=>{m=null}),qe())},i(p){d||(P(m),d=!0)},o(p){G(m),d=!1},d(p){p&&w(e),m&&m.d(),c=!1,b()}}}function Le(t,e,r){let a,s=Pe,f=()=>(s(),s=Be(o,n=>r(1,a=n)),o);t.$$.on_destroy.push(()=>s());let{field:o}=e;f();let l=!1;const i=()=>r(2,l=!l);return t.$$set=n=>{"field"in n&&f(r(0,o=n.field))},t.$$.update=()=>{var n;t.$$.dirty&2&&(((n=a.errors)==null?void 0:n.length)?r(2,l=!0):r(2,l=!1))},[o,a,l,i]}class fe extends $e{constructor(e){super();Ee(this,e,Le,He,ke,{field:0})}}function ze(...t){let e=[],r=[];if(t.forEach(i=>{const n=z(i);e.includes(n.name)?r=r.includes(n.name)?r:[...r,n.name]:e=[...e,n.name]}),r.length)throw new Error(`Cannot have the fields with the same name: ${r.join(", ")}`);const a=Oe(t,i=>({valid:i.every(n=>n.valid),dirty:i.some(n=>n.dirty),errors:i.map(n=>n.errors.map(v=>v.includes(".")?v:`${n.name}.${v}`)).flat().filter((n,v,h)=>h.indexOf(n)===v),hasError(n){return this.errors.findIndex(v=>v===n)!==-1}})),{subscribe:s}=a;function f(){t.forEach(i=>i.reset&&i.reset())}async function o(){for(const i of t)i.validate&&await i.validate()}function l(i){return t.find(n=>z(n).name===i)}return{subscribe:s,reset:f,validate:o,getField:l}}const Fe={valid:!0,checkOnInit:!1,validateOnChange:!0,stopAtFirstError:!1};function ce(t,e,r=[],a={}){return H({name:t,value:e,valid:!0,invalid:!1,errors:[],dirty:!1},r,a)}function Je(t){const e=function(a){return t.subscribe!==void 0},r=function(a){return!!t.name&&t.valid!==void 0};return e()?z(t).value:r()?t.value:t}async function de(t,e,r=!1){const a=Je(t);let s=[];for(const f of e){let o=f(a);if(We(o)&&(o=await o),r&&!o.valid){s=[o];break}s=[...s,o]}return s}function H(t,e,r={}){if(e){const a=e.filter(f=>!f.valid).map(f=>f.name),s=!a.length;return ne(ye(ne({},t),{valid:s,invalid:!s,errors:a}),r)}return t}function Ke(t,e,r=[],a){const s={name:t,value:e,valid:a.valid,invalid:!a.valid,dirty:!1,errors:[]},f=Me(s),{subscribe:o,update:l,set:i}=f;async function n(d,c=!1){if(c||a.validateOnChange){let b=await de(d,r,a.stopAtFirstError);i(H(d,b,{dirty:!0}))}else i(H(d,[],{dirty:!0}))}async function v(){const d=await de(f,r,a.stopAtFirstError);let c;return l(b=>(c=H(b,d,{dirty:!1}),c)),c}function h(){i(H({dirty:!1,errors:[],name:t,valid:a.valid,invalid:!a.valid,value:e}))}return a.checkOnInit&&n(s),{subscribe:o,update:l,set:n,validate:v,reset:h}}function Ie(t,e,r=[],a=Fe){return Ke(t,e,r,a)}function Qe(t,e,r,a=[],s=Fe){let f;const{subscribe:o}=Oe(e,(l,i)=>{const n=r(l),h=(()=>{let d=[];return l.forEach(c=>{d=[...d,...c.errors.map(b=>({valid:!1,name:`${c.name}.${b}`})).flat()]}),d})();f=de(n,a,s.stopAtFirstError).then(d=>{const c=ce(t,n,[...d,...h],{dirty:l.some(b=>b.dirty)});return i(c),c}),i(ce(t,n,h,{dirty:l.some(d=>d.dirty)}))},ce(t,r(e.map(l=>z(l))),[]));return{subscribe:o,validate:async()=>f}}function Ne(){return t=>{let e=!0;return t==null&&(e=!1),typeof t=="string"&&(e=t.replace(/\s/g,"").length>0),{valid:e,name:"required"}}}function Xe(t){let e,r,a,s,f,o,l,i,n,v,h,d,c,b,m=t[2].value+"",R,p,g,j,$,A,K,Q,C,X,Y,U,Z,x,q,ee,W,te,me;return l=new fe({props:{field:t[3]}}),n=new fe({props:{field:t[4]}}),h=new fe({props:{field:t[5]}}),{c(){e=E("section"),r=E("input"),a=T(),s=E("input"),f=T(),o=E("div"),se(l.$$.fragment),i=T(),se(n.$$.fragment),v=T(),se(h.$$.fragment),d=T(),c=E("h1"),b=I("Welcome "),R=I(m),p=T(),g=E("br"),j=T(),$=E("div"),A=E("button"),K=I("Reset name"),Q=T(),C=E("button"),X=I("Reset password"),Y=T(),U=E("button"),Z=I("Reset form"),x=T(),q=E("button"),ee=I("Validate form"),this.h()},l(_){e=k(_,"SECTION",{class:!0});var y=O(e);r=k(y,"INPUT",{type:!0,class:!0}),a=F(y),s=k(y,"INPUT",{type:!0,class:!0}),f=F(y),o=k(y,"DIV",{class:!0});var B=O(o);le(l.$$.fragment,B),i=F(B),le(n.$$.fragment,B),v=F(B),le(h.$$.fragment,B),B.forEach(w),d=F(y),c=k(y,"H1",{});var re=O(c);b=N(re,"Welcome "),R=N(re,m),re.forEach(w),p=F(y),g=k(y,"BR",{}),j=F(y),$=k(y,"DIV",{class:!0});var D=O($);A=k(D,"BUTTON",{});var ve=O(A);K=N(ve,"Reset name"),ve.forEach(w),Q=F(D),C=k(D,"BUTTON",{});var pe=O(C);X=N(pe,"Reset password"),pe.forEach(w),Y=F(D),U=k(D,"BUTTON",{});var he=O(U);Z=N(he,"Reset form"),he.forEach(w),x=F(D),q=k(D,"BUTTON",{});var _e=O(q);ee=N(_e,"Validate form"),_e.forEach(w),D.forEach(w),y.forEach(w),this.h()},h(){V(r,"type","text"),V(r,"class","svelte-11n4mq4"),V(s,"type","text"),V(s,"class","svelte-11n4mq4"),V(o,"class","flex flex-col gap-4"),V($,"class","space-x-3"),V(e,"class","p-10")},m(_,y){ae(_,e,y),u(e,r),J(r,t[0].value),u(e,a),u(e,s),J(s,t[1].value),u(e,f),u(e,o),ie(l,o,null),u(o,i),ie(n,o,null),u(o,v),ie(h,o,null),u(e,d),u(e,c),u(c,b),u(c,R),u(e,p),u(e,g),u(e,j),u(e,$),u($,A),u(A,K),u($,Q),u($,C),u(C,X),u($,Y),u($,U),u(U,Z),u($,x),u($,q),u(q,ee),W=!0,te||(me=[S(r,"input",t[7]),S(s,"input",t[8]),S(A,"click",t[3].reset),S(C,"click",t[4].reset),S(U,"click",t[6].reset),S(q,"click",t[6].validate)],te=!0)},p(_,[y]){y&1&&r.value!==_[0].value&&J(r,_[0].value),y&2&&s.value!==_[1].value&&J(s,_[1].value),(!W||y&4)&&m!==(m=_[2].value+"")&&M(R,m)},i(_){W||(P(l.$$.fragment,_),P(n.$$.fragment,_),P(h.$$.fragment,_),W=!0)},o(_){G(l.$$.fragment,_),G(n.$$.fragment,_),G(h.$$.fragment,_),W=!1},d(_){_&&w(e),oe(l),oe(n),oe(h),te=!1,Ge(me)}}}function Ye(){return async t=>{const e=await fetch("https://jsonplaceholder.typicode.com/users").then(a=>a.json());return{valid:!(a=>!!e.find(s=>s.username===t))(),name:"check_name"}}}function Ze(t,e,r){let a,s,f;const o=c=>b=>({valid:b!==c,name:"newMax"}),l=Ie("firstname","",[Ne(),Ye()]);ue(t,l,c=>r(0,a=c));const i=Ie("lastname","",[Ne()]);ue(t,i,c=>r(1,s=c));const n=Qe("fullname",[l,i],([c,b])=>[c.value,b.value].join(" "),[o("kevin guillouard")]);ue(t,n,c=>r(2,f=c));const v=ze(l,i,n);function h(){a.value=this.value,l.set(a)}function d(){s.value=this.value,i.set(s)}return[a,s,f,l,i,n,v,h,d]}class tt extends $e{constructor(e){super();Ee(this,e,Ze,Xe,ke,{})}}export{tt as default};
