var K=Object.defineProperty,L=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var B=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))Q.call(t,r)&&B(e,r,t[r]);if(U)for(var r of U(t))W.call(t,r)&&B(e,r,t[r]);return e},V=(e,t)=>L(e,M(t));import{a1 as F,a2 as Y,a3 as Z,C as x,S as ee,i as te,s as re,e as S,j,t as k,c as g,a as I,l as J,g as T,d as h,b as ne,f as w,E as y,a4 as X,F as ae,h as z,X as D,a5 as G}from"../../chunks/vendor-79d26fd6.js";function ie(...e){let t=[],r=[];if(e.forEach(i=>{const a=F(i);t.includes(a.name)?r=r.includes(a.name)?r:[...r,a.name]:t=[...t,a.name]}),r.length)throw new Error(`Cannot have the fields with the same name: ${r.join(", ")}`);const n=Y(e,i=>({valid:i.every(a=>a.valid),dirty:i.some(a=>a.dirty),errors:i.map(a=>a.errors.map(u=>u.includes(".")?u:`${a.name}.${u}`)).flat().filter((a,u,c)=>c.indexOf(a)===u),hasError(a){return this.errors.findIndex(u=>u===a)!==-1}})),{subscribe:o}=n;function l(){e.forEach(i=>i.reset&&i.reset())}async function f(){for(const i of e)i.validate&&await i.validate()}function v(i){return e.find(a=>F(a).name===i)}function m(){return e.reduce((i,a)=>{const u=F(a);return i[u.name]=u.value,i},{})}return{subscribe:o,reset:l,validate:f,getField:v,summary:m}}const se={valid:!0,checkOnInit:!1,validateOnChange:!0,stopAtFirstError:!1};function le(e){const t=Object.keys(e);return["name","value","valid","invalid","errors"].every(r=>t.includes(r))}function ue(e){const t=function(n){return e.subscribe!==void 0},r=function(n){return!!e.name&&e.valid!==void 0};return t()?F(e).value:r()?e.value:e}async function H(e,t,r=!1){const n=ue(e);let o=[];for(const l of t){let f=l(n);if(Z(f)&&(f=await f),r&&!f.valid){o=[f];break}o=[...o,f]}return o}function N(e,t,r={}){if(t){const n=t.filter(l=>!l.valid).map(l=>l.name),o=!n.length;return O(V(O({},e),{valid:o,invalid:!o,errors:n}),r)}return e}function oe(e,t,r=[],n){const o={name:e,value:t,valid:n.valid,invalid:!n.valid,dirty:!1,errors:[]},l=x(o),{subscribe:f,update:v,set:m}=l;async function i(c,p=!1){if(le(c)||(c=N(F(l),[],{value:c})),p||n.validateOnChange){let _=await H(c,r,n.stopAtFirstError);m(N(c,_,{dirty:!0}))}else m(N(c,[],{dirty:!0}))}async function a(){const c=await H(l,r,n.stopAtFirstError);let p;return v(_=>(p=N(_,c,{dirty:!1}),p)),p}function u(){m(N({dirty:!1,errors:[],name:e,valid:n.valid,invalid:!n.valid,value:t}))}return n.checkOnInit&&i(o),{subscribe:f,update:v,set:i,validate:a,reset:u}}function fe(e,t,r=[],n={}){return oe(e,t,r,O(O({},se),n))}function de(){return e=>{let t=!0;return e==null&&(t=!1),typeof e=="string"&&(t=e.replace(/\s/g,"").length>0),{valid:t,name:"required"}}}function ce(e){return t=>t==null?{valid:!1,name:"pattern"}:{valid:e.test(t),name:"pattern"}}function ve(e){let t,r,n,o=JSON.stringify(e[2],null,2)+"",l,f,v,m,i,a,u,c=JSON.stringify(e[0],null,2)+"",p,_,b,E=JSON.stringify(e[1],null,2)+"",C,P,q;return{c(){t=S("section"),r=S("input"),n=j(),l=k(o),f=j(),v=S("button"),m=k("Send form"),a=j(),u=S("pre"),p=k(c),_=j(),b=S("pre"),C=k(E),this.h()},l(s){t=g(s,"SECTION",{});var d=I(t);r=g(d,"INPUT",{type:!0}),n=J(d),l=T(d,o),f=J(d),v=g(d,"BUTTON",{});var A=I(v);m=T(A,"Send form"),A.forEach(h),d.forEach(h),a=J(s),u=g(s,"PRE",{});var $=I(u);p=T($,c),$.forEach(h),_=J(s),b=g(s,"PRE",{});var R=I(b);C=T(R,E),R.forEach(h),this.h()},h(){ne(r,"type","text"),v.disabled=i=!e[1].valid},m(s,d){w(s,t,d),y(t,r),X(r,e[0].value),y(t,n),y(t,l),y(t,f),y(t,v),y(v,m),w(s,a,d),w(s,u,d),y(u,p),w(s,_,d),w(s,b,d),y(b,C),P||(q=ae(r,"input",e[4]),P=!0)},p(s,[d]){d&1&&r.value!==s[0].value&&X(r,s[0].value),d&2&&i!==(i=!s[1].valid)&&(v.disabled=i),d&1&&c!==(c=JSON.stringify(s[0],null,2)+"")&&z(p,c),d&2&&E!==(E=JSON.stringify(s[1],null,2)+"")&&z(C,E)},i:D,o:D,d(s){s&&h(t),s&&h(a),s&&h(u),s&&h(_),s&&h(b),P=!1,q()}}}function me(e,t,r){let n,o;const l=fe("name","",[de(),ce(/\d+/)]);G(e,l,m=>r(0,n=m));const f=ie(l);G(e,f,m=>r(1,o=m));function v(){n.value=this.value,l.set(n)}return[n,o,l,f,v]}class _e extends ee{constructor(t){super();te(this,t,me,ve,re,{})}}export{_e as default};
